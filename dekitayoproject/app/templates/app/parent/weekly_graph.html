{# 保護者用　週間学習記録画面グラフ #}

{% extends 'app/parent/base.html' %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/parent/weekly_graph' %}">
{% endblock %}

{% block content %}

{% if not child %}
  <p>お子様の登録を行ってください</p>
{% else %}
<div class="period-header">
  <a href="{% url 'parent_weekly_graph_by_week' child.id prev_year prev_month prev_day %}" class="arrow">←</a>
  <span class="period-title">１週間のできた！</span>
  <a href="{% url 'parent_weekly_graph_by_week' child.id next_year next_month next_day %}" class="arrow">→</a>
</div>
  <h2> {{ start_date|date:"n/j" }}〜{{ end_date|date:"n/j" }} </h2>

  <canvas id="weeklyChart"></canvas>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const labels = {{ labels|safe }};
    const counts = {{ counts|safe }};

    new Chart(document.getElementById("weeklyChart"), {
      type: "bar",
      data: {
        labels: labels,
        datasets: [{
          label: "1日の合計学習項目数",
          data: counts,
        }]
      },
      options: {
        scales: { y: { beginAtZero: true, ticks: { precision: 0 } } }
      }
    });
  </script>
{% endif %}

{% endblock %}