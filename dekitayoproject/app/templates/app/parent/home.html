{# 保護者用　ホーム画面 #}

{% extends 'app/parent/base.html' %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/parent/home.css' %}">
{% endblock %}

{% block content %}
{# 日付 #}
<p class="today">{{ today|date:"n月j日(D)" }}</p>

{% if not child %}
<p>
  マイページから招待コードを使用し<br>
  お子様のアカウント登録をおこなってください
</p>
{% else %}    
<p class="child-name">{{ child.user.username }}</p>
<h2>今日のできた！</h2>
<div class="content-box">
    {% if daily_log %}
      <div class="items">
    {% for row in rows %}
      {% if row.item and row.item.id in checked_item_ids %}
        <div class="item-row">
          <span class="color-box {{ row.class }}"></span>
          <span class="item-name">{{ row.item.item_name }}</span>
        </div>
      {% endif %}
    {% endfor %}
      </div>
{% else %}
<p>（まだ登録されていません）</p>
{% endif %}

  <div class="child-comment">
    {% if request.user.icon %}
        <img
          class="comment-icon"
          src="{% static child.user.icon.image_url %}"
          alt="commenticon">
    {% endif %}
    
    <span class="child-comment-text">
      {{ daily_log.child_comment|default:"（コメントなし）" }}
    </span>
  </div>
</div>
{# 写真 #}
<div class="photo-grid">
  {% if daily_log.photo1_url %}
    <div class="photo-box">
      <img class="photo-img" src="{{ daily_log.photo1_url.url }}" alt="photo1">
    </div>  
  {% endif %}

  {% if daily_log.photo2_url %}
    <div class="photo-box">
      <img class="photo-img" src="{{ daily_log.photo2_url.url }}" alt="photo2">
    </div>    
  {% endif %}

  {% if not daily_log.photo1_url and not daily_log.photo2_url %}
      <p>（写真なし）</p>
  {% endif %}
</div> 

<form method="post">
    {% csrf_token %}
      <div class="content-box">
        <div class="form-center">
          {{ comment_form.text }}
        </div>
      </div>
  <button type="submit" class="btn">送信</button>
</form>
{% endif %}
{% endblock %}
