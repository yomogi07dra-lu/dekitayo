{# 保護者用　月間学習記録画面グラフ #}

{% extends 'app/parent/base.html' %}

{% load static %}


{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/parent/monthly_graph.css' %}">
{% endblock %}

{% block content %}

{% if not child %}
  <p>お子さまを登録すると月間グラフが表示されます。</p>
{% else %}

<a href="{% url 'parent_monthly_graph_by_month' child.id prev_year prev_month %}">←</a>
<span>{{ month }}月のできた！</span>
<a href="{% url 'parent_monthly_graph_by_month' child.id next_year next_month %}">→</a>


    <canvas id="monthlyBar"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> {# グラフライブラリ #}
    <script>
    const ctx = document.getElementById('monthlyBar');  // <canvas> を指定

    new Chart(ctx, {
    type: 'bar',  // 横棒グラフ
    data: {
        labels: {{ labels|safe }},  //　学習項目名
        datasets: [{
        data: {{ counts|safe }},  // 横の長さ
        backgroundColor: {{ colors|safe }}, //　棒グラフの色（7色）
        }]
    },
    options: {
        indexAxis: 'y',   //  横棒にする際に必要（無いと縦棒になる）
        scales: {
        x: {
            beginAtZero: true, // メモリ設定　0から
            ticks: {
            stepSize: 1 // 1目盛りずつ
            }
        }
        },
        plugins: {
        legend: { display: false } // 凡例は消す
        }
    }
    });
    </script>
{% endif %}
{% endblock %}