{# 保護者用　月間学習記録画面カレンダー #}

{% extends 'app/parent/base.html' %}

{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/parent/monthly_calendar.css' %}">
{% endblock %}


{% block content %}

{% if not child %}
  <p>お子さまのアカウントを登録してください</p>
    <span class="period-title">{{ month }} 月のできた！</span>
{% else %}
<p class="child-name">{{ child.user.username }}</p>
<div class="period-header">
  <a href="{% url 'parent_monthly_calendar_by_month' prev_year prev_month %}" class="arrow">←</a>
  <span class="period-title">{{ month }} 月のできた！</span>
  <a href="{% url 'parent_monthly_calendar_by_month' next_year next_month %}" class="arrow">→</a>
</div>
  {% endif %}

  <table class="calendar">{# 表でカレンダー作成 #}
    <tr>
      <th>日</th><th>月</th><th>火</th><th>水</th><th>木</th><th>金</th><th>土</th>
    </tr>
    {% for week in calendar_days %}{# １週間ずつ取り出し1行に #}
    <tr>
      {% for cell in week %}{# １日ずつ見る #}
        {% if cell.day == 0 %}{# 先月・来月のはみ出した日は空白 #}
          <td class="empty"></td>{# １マス #}
        {% else %}
          <td class="day-cell {% if not cell.can_edit %}is-disabled{% endif %}">
            {% if cell.can_edit %}
              <a class="day-link" href="{% url 'parent_home_by_date' year month cell.day %}">
                <span class="day-number">{{ cell.day }}</span>
                {% if cell.has_log %}
                  <span class="star">⭐</span>
                {% endif %}
              </a>
            {% else %}
              <span class="day-number">{{ cell.day }}</span>
              {% if cell.has_log %}
                <span class="star">⭐</span>
              {% endif %}
            {% endif %}
          </td>
        {% endif %}
      {% endfor %}
    </tr>
    {% endfor %}
  </table>
{% endblock %}