{% extends 'app/parent_base.html' %}
{% load index %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/parent_item_manage.css' %}">
    <style>
        .item-form {
            align-self: center;  
            text-align: center;
            margin: 0 auto 24px;
        }
        .item-input {
            width: 70%;
            max-width: 240px;
            margin: 0 auto 12px;
            display: block;
            padding: 8px;
            font-size: 14px;
        }
        .items{
            list-style: none;
            padding: 0;
            margin: 16px 0;
        }
        .item-row{
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 4px;
            border-bottom: 1px solid #ddd;
        }
        .color-box{
            width: 18px;
            height: 18px;
            border-radius: 4px;
            flex: 0 0 auto;
        }
        .item-label{
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .item-name{
            flex: 1;  
            white-space: nowrap;
        }
        .item-check{
            width: auto;
            margin: 0;
            padding: 0;
        }
        .btn-danger{
            width: 100px;
            margin: 12px auto 0;
            display: block;
        }
    </style>
    {% endblock %}

{% block content %}

<h2>できた！項目</h2>

<form method="post" class="item-form">
    {% csrf_token %}
    <input type="hidden" name="action" value="create">
    {{ item_form }}
    <button type="submit" name="action" value="create">登録</button>
</form>

<hr>

<form method="post">
    {% csrf_token %}
    <ul class="items">
        {% for color in colors %}
            {% with i=forloop.counter0 %}
                <li class="item-row">
                    <span class="color-box" style="background-color: {{ color }};"></span>
                    
                    <label class="item-label">
                        {% if i < items|length %}
                            {% with item=items|index:i %}
                                <span class="item-name">{{ item.item_name }}</span>
                                <input class="item-check" type="checkbox" name="item_ids" value="{{ item.id }}">
                            {% endwith %}
                        {% else %}
                            <span class="item-name">（未登録）</span>
                            <input class="item-check" type="checkbox" disabled>
                        {% endif %}
                    </label>
                </li>
            {%endwith%}
        {% endfor %}
    </ul>
    <button type="submit" name="action" value="delete" class="btn-danger">削除</button>
</form>

{% endblock %}